(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{11:function(e,t,n){e.exports={sign:"Map_sign__3OxH1",signSVG:"Map_signSVG__1pqra",tipContent:"Map_tipContent__31dkD",entryForm:"Map_entryForm__1L4D1",entryDesc:"Map_entryDesc__zskcl"}},31:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAIAAAAiOjnJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTEwMDk1OTdGOERFMTFFNEI1MjdFNkYwQUY5NzlEOEUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTEwMDk1OThGOERFMTFFNEI1MjdFNkYwQUY5NzlEOEUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozRDRCNENBQUY4Q0UxMUU0QjUyN0U2RjBBRjk3OUQ4RSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxMTAwOTU5NkY4REUxMUU0QjUyN0U2RjBBRjk3OUQ4RSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PiKpnkYAAAgtSURBVHja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"},32:function(e,t){e.exports="data:image/png;base64,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"},34:function(e,t,n){e.exports=n(47)},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a,A=n(0),r=n.n(A),i=n(21),c=n.n(i),s=n(5),l=(n(39),n(13)),o=n(10),u=n(12),E=n(30),d=n(49),p=n(18),g=n(33),m=n(11),b=n.n(m),C=n(31),I=n.n(C),v=n(7),f=n.n(v),j=n(8),D=function(){var e=Object(j.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://xinleibird.me:20443","/api/signs"));case 3:return t=e.sent,e.abrupt("return",t.json());case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(j.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://xinleibird.me:20443","/api/signs"),{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();!function(e){e[e.INIT_ENTRIES=0]="INIT_ENTRIES",e[e.ADD_ENTRY=1]="ADD_ENTRY",e[e.DELETE_ENTRY=2]="DELETE_ENTRY",e[e.UPDATE_ENTRY=3]="UPDATE_ENTRY",e[e.SET_OPENED_TIP=4]="SET_OPENED_TIP",e[e.UPDATE_ADDED_LOCATION=5]="UPDATE_ADDED_LOCATION"}(a||(a={}));var Q=function(e){return{type:a.SET_OPENED_TIP,openedTipState:e}},W=function(e){return{type:a.UPDATE_ADDED_LOCATION,coordinates:e||[]}},S=function(e){var t,n,A,i,c=e.location,s=void 0===c?{type:"Point",coordinates:[0,0]}:c,l=e.children,u=Object(o.b)(),E=Object(g.a)({mode:"onChange"}),d=E.handleSubmit,m=E.register,C=E.errors;return r.a.createElement("form",{className:b.a.entryForm,onSubmit:d((function(e){var t,n=e,A=n.image,r=Object(p.a)({},n,{location:s});A||(r=Object(p.a)({},r,{image:I.a})),u((t=r,function(){var e=Object(j.a)(f.a.mark((function e(n){var A;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:A=e.sent,n({type:a.ADD_ENTRY,entry:A});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),u(W(null))}))},r.a.createElement("header",null,r.a.createElement("h3",null,"\u6dfb\u52a0\u6807\u8bb0")),r.a.createElement("main",null,r.a.createElement("input",{placeholder:"\u6807\u9898",name:"title",ref:m({required:"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a",pattern:{value:/((?:[\u3400-\u4DBF\u4E00-\u9FFC\uFA0E\uFA0F\uFA11\uFA13\uFA14\uFA1F\uFA21\uFA23\uFA24\uFA27-\uFA29]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD884[\uDC00-\uDF4A])|[ 0-9A-Z_a-z])/,message:"\u4ec5\u63a5\u6536\u5b57\u7b26\u6570\u5b57\u7a7a\u683c\u548c\u4e0b\u5212\u7ebf"},validate:function(e){if(e.length>48)return"\u6807\u9898\u6700\u5927\u63a5\u53d748\u5b57\u7b26"}})}),r.a.createElement("div",null,null===(t=C.title)||void 0===t?void 0:t.message),r.a.createElement("input",{placeholder:"\u7ea7\u522b",name:"rating",type:"number",ref:m({pattern:{value:/^[1-5]$/,message:"\u6570\u5b57 1 - 5"}})}),r.a.createElement("div",null,null===(n=C.rating)||void 0===n?void 0:n.message),r.a.createElement("input",{placeholder:"\u56fe\u7247 URL",name:"image",ref:m({pattern:{value:/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,message:"\u65e0\u6548\u7684 URL"}})}),r.a.createElement("div",null,null===(A=C.image)||void 0===A?void 0:A.message),r.a.createElement("textarea",{placeholder:"\u63cf\u8ff0",name:"description",ref:m({validate:function(e){if(e.length>512)return"\u63cf\u8ff0\u6700\u5927\u63a5\u53d7512\u5b57\u7b26"}})}),r.a.createElement("div",null,null===(i=C.description)||void 0===i?void 0:i.message)),r.a.createElement("footer",null,r.a.createElement("span",null,"".concat(s.coordinates[0],", ").concat(s.coordinates[1])),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Confirm")),l)},O=n(1),T=n(16),Y=function(e){var t=e.signEntry,n=e.type,a=void 0===n?"yellow":n,i=e.zoom,c=void 0===i?12:i,u=Object(T.a)(e,["signEntry","type","zoom"]),E=t.location,d=t._id,p=Object(s.a)(E.coordinates,2),g=p[0],m=p[1],C=Object(o.b)(),I=Object(A.useCallback)((function(e){return function(){C(Q(e))}}),[C]);return Object(A.useMemo)((function(){return r.a.createElement(l.a,Object.assign({longitude:g,latitude:m,offsetLeft:-c,offsetTop:2*-c},u),r.a.createElement("div",{className:b.a.sign,onClick:I(Object(O.a)({},d,!0))},r.a.createElement("svg",{className:b.a.signSVG,viewBox:"0 0 24 24",style:{width:"".concat(2*c,"px"),height:"".concat(2*c,"px"),fill:"".concat("yellow"===a?"#e6891e":"#ff2200"),stroke:"white"}},r.a.createElement("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),r.a.createElement("circle",{cx:"12",cy:"10",r:"3"}))))}),[d,u,I,m,g,a,c])},x=n(6),h=Object(u.c)({signs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{entries:[],openedTips:{},addedCoordinates:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.INIT_ENTRIES:return{entries:t.entries?Object(x.a)(t.entries):[],openedTips:e.openedTips,addedCoordinates:e.addedCoordinates};case a.SET_OPENED_TIP:return{entries:e.entries,openedTips:Object(p.a)({},e.openedTips,{},t.openedTipState),addedCoordinates:e.addedCoordinates};case a.ADD_ENTRY:return{entries:[].concat(Object(x.a)(e.entries),[t.entry]),openedTips:e.openedTips,addedCoordinates:e.addedCoordinates};case a.UPDATE_ADDED_LOCATION:return{entries:e.entries,openedTips:e.openedTips,addedCoordinates:Object(x.a)(t.coordinates)};default:return e}}}),y=function(e){var t=e.signEntry,n=e.children,a=Object(T.a)(e,["signEntry","children"]),i=t.location,c=t.title,u=t._id,E=t.description,d=t.image,p=t.rating,g=Object(s.a)(i.coordinates,2),m=g[0],C=g[1],I=Object(o.b)(),v=Object(A.useCallback)((function(e){I(Q(e))}),[I]);return Object(A.useMemo)((function(){return r.a.createElement(l.c,Object.assign({className:b.a.tip,longitude:m,latitude:C,closeButton:!0,closeOnClick:!1,anchor:"top",captureScroll:!0,sortByDepth:!0,onClose:function(){v(Object(O.a)({},u,!1))}},a),r.a.createElement("div",{className:b.a.tipContent},n||r.a.createElement("div",{className:b.a.entryDesc},r.a.createElement("header",null,r.a.createElement("h3",null,c)),r.a.createElement("main",null,Object(x.a)(Array(p)).map((function(e){return"\u2b50"})),r.a.createElement("div",{className:b.a.imageContainer},r.a.createElement("img",{src:d,alt:""})),r.a.createElement("article",null,E)),r.a.createElement("footer",null,r.a.createElement("span",null,"".concat(m,", ").concat(C))))))}),[u,a,n,E,v,d,C,m,p,c])},F=n(32),L=n.n(F),N=function(){var e=Object(A.useState)({latitude:22.828373068332063,longitude:108.30307218045874,zoom:12,maxZoom:15,minZoom:2}),t=Object(s.a)(e,2),n=t[0],i=t[1],c=n.zoom,u=Object(o.b)(),E=Object(A.useRef)(null),p=Object(A.useCallback)((function(){u(function(){var e=Object(j.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:n=e.sent,t({type:a.INIT_ENTRIES,entries:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[u]);Object(A.useEffect)((function(){p()}),[p]);var g=Object(o.c)((function(e){return e.signs.entries})),m=Object(o.c)((function(e){return e.signs.openedTips})),b=Object(o.c)((function(e){return e.signs.addedCoordinates})),C={type:"Point",coordinates:b},I=Object(A.useCallback)((function(e){u(W(e.lngLat))}),[u]),v=Object(A.useCallback)((function(e){u(W(e.lngLat))}),[u]),B=Object(A.useCallback)((function(){u(W(null))}),[u]),Q=Object(A.useCallback)((function(e){var t=e.viewState;i(t)}),[]);return r.a.createElement(l.d,Object.assign({ref:E,width:"100vw",height:"100vh"},n,{mapStyle:"mapbox://styles/xinleibird/cke3vf72u0kwo19o8kquxfyom",mapboxApiAccessToken:"pk.eyJ1IjoieGlubGVpYmlyZCIsImEiOiJja2RvYWk0ZWIxMGJlMnJxaXMybmI1Z2dyIn0.SbOhikjtRsfPrW9L6xnrzQ",doubleClickZoom:!1,onDblClick:I,onViewStateChange:Q,attributionControl:!1}),r.a.createElement("div",{style:{position:"absolute",right:12,top:12}},r.a.createElement("button",{title:"github repo",style:{width:32,height:32,padding:0,background:"#fff",border:0,borderRadius:20,outline:0,fontSize:"0.75rem"}},r.a.createElement("a",{href:"https://github.com/login/oauth/authorize?client_id=".concat("cf984175e631665f5d69","&redirect_uri=").concat("https://xinleibird.me:20443","/oauth/redirect"),style:{textDecoration:"none",fontSize:"0.75rem"}},"\u767b\u5f55"))),r.a.createElement("div",{style:{position:"absolute",left:12,top:12}},r.a.createElement(l.b,{showCompass:!0})),r.a.createElement("div",{style:{position:"absolute",right:12,bottom:12}},r.a.createElement("button",{title:"github repo",style:{width:32,height:32,padding:0,background:"#fff",border:0,borderRadius:20,outline:0}},r.a.createElement("a",{href:"https://github.com/xinleibird/map-sign",target:"blank"},r.a.createElement("img",{style:{width:32},src:L.a,alt:"repo",draggable:!1})))),g.map((function(e){var t=e._id,n=Object(d.a)(e._id||"","63d601b1-3193-475e-9d1e-ccb1fd077784");return r.a.createElement(A.Fragment,{key:n+"_fragment"},r.a.createElement(Y,{signEntry:e,key:n+"_sign",zoom:c}),m[t]&&r.a.createElement(y,{signEntry:e,key:n+"_tip"}))})),2===b.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,{signEntry:{title:"",location:C},type:"red",draggable:!0,onDrag:v,zoom:c}),r.a.createElement(y,{signEntry:{title:"",location:C},onClose:B},r.a.createElement(S,{location:C}))))},w=function(){var e=Object(u.d)(h,Object(u.a)(E.a));return r.a.createElement(o.a,{store:e},r.a.createElement(N,null))};n(46);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.8869beb9.chunk.js.map