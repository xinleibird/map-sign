{"version":3,"sources":["components/res/user.svg","components/res/avatar.png","components/store/actions.ts","api/index.ts","components/AppAlert.tsx","components/LoadingLabel.tsx","components/Login.tsx","components/Rating.tsx","components/Content.tsx","components/Sign.tsx","components/Signs.tsx","components/store/reducers.ts","components/Map.tsx","index.tsx","components/res/github.png"],"names":["module","exports","ACTION_TYPE","listMapSignsFromDB","a","fetch","process","credentials","res","json","console","error","message","stack","addMapSignToDB","param","method","body","JSON","stringify","headers","updateMapSignToDB","entry","_id","deleteMapSignToDB","code","status","getCurrentUser","initEntries","dispatch","data","type","INIT_ENTRIES","entries","initFinish","SET_APP_LOADING","isLoading","SET_APP_ALERT","alert","title","description","active","action","addEntry","sign","ADD_ENTRY","UPDATE_ADDED_LOCATION","coordinates","updateEntry","UPDATE_ENTRY","SET_OPENED_TIP","openedTipState","deleteEntry","DELETE_ENTRY","setOpenedTip","updateAddedLocation","setAppLoading","setAppAlert","setAppUserInfo","userInfo","SET_APP_USER_INFO","AppAlert","useSelector","state","app","useDispatch","handlePassive","useCallback","close","handleActive","window","location","href","useMemo","open","Title","Subtitle","Content","Action","onClick","passive","LoadingLabel","size","Login","useState","showCard","setShowCard","ref","useRef","useClickAway","handleSignInLoading","handleSignOutLoading","login","avatar_url","name","hasLoginCard","src","style","marginLeft","notLoginCard","userSVG","githubPng","alt","width","hasLoginButton","paddingLeft","paddingRight","auto","paddingTop","notLoginButton","iconRight","Rating","num","getRating","para","slice","signEntry","isNew","isEditing","image","rating","owner","longitude","latitude","html_url","copy","useClipboard","editing","setEditing","localNew","setNew","handleSetOpendTip","useToasts","setToast","signShow","shadow","textAlign","params","h4","text","h5","height","small","Footer","span","loading","disabled","useForm","mode","handleSubmit","register","errors","addedCoordinates","signs","handleClickClose","useEffect","signForm","onSubmit","value","formValue","clearable","placeholder","required","pattern","validate","str","length","initialValue","y","rows","htmlType","Sign","zoom","args","openedTips","entryOpenedState","color","offsetLeft","offsetTop","cursor","closeButton","anchor","captureScroll","tipSize","sortByDepth","Signs","visibleEntries","map","key","uuid","combineReducers","odd","e","Map","maxZoom","minZoom","viewport","setViewport","currentMapInstance","handleInitEntries","handleUserInfo","info","preLoading","document","getElementById","removeChild","addedLocation","handleAddEntry","lngLat","handleDragAddEntry","handleViewportChange","viewState","onViewStateChange","mapStyle","mapboxApiAccessToken","doubleClickZoom","onDblClick","attributionControl","Container","justify","showCompass","placement","githubSVG","avatarImage","draggable","onDrag","MapWrapper","store","createStore","reducers","applyMiddleware","thunk","ReactDOM","render","StrictMode"],"mappings":"qFAAAA,EAAOC,QAAU,IAA0B,kC,kBCA3CD,EAAOC,QAAU,0jH,wGCSLC,E,mHCPCC,EAAkB,uCAAG,4BAAAC,EAAA,+EAEZC,MAAM,GAAD,OAAIC,8BAAJ,cAAkD,CACvEC,YAAa,YAHe,cAExBC,EAFwB,yBAKvBA,EAAIC,QALmB,uCAO9BC,QAAQC,MAAM,KAAMC,SAPU,kBAQvB,CAAEA,QAAS,KAAMA,QAASC,MAAO,KAAMA,QARhB,yDAAH,qDAYlBC,EAAc,uCAAG,WAAOC,GAAP,eAAAX,EAAA,+EAERC,MAAM,GAAD,OAAIC,8BAAJ,cAAkD,CACvEU,OAAQ,OACRC,KAAMC,KAAKC,UAAUJ,GACrBK,QAAS,CACP,eAAgB,oBAElBb,YAAa,YARW,cAEpBC,EAFoB,yBAUnBA,EAAIC,QAVe,uCAY1BC,QAAQC,MAAM,KAAMC,SAZM,kBAanB,CAAEA,QAAS,KAAMA,QAASC,MAAO,KAAMA,QAbpB,yDAAH,sDAiBdQ,EAAiB,uCAAG,WAAOC,GAAP,eAAAlB,EAAA,+EAEXC,MAAM,GAAD,OAAIC,8BAAJ,sBAAkDgB,EAAMC,KAAO,CACpFP,OAAQ,MACRC,KAAMC,KAAKC,UAAUG,GACrBF,QAAS,CACP,eAAgB,oBAElBb,YAAa,YARc,cAEvBC,EAFuB,yBAUtBA,EAAIC,QAVkB,uCAY7BC,QAAQC,MAAM,KAAMC,SAZS,kBAatB,CAAEA,QAAS,KAAMA,QAASC,MAAO,KAAMA,QAbjB,yDAAH,sDAiBjBW,EAAiB,uCAAG,WAAOF,GAAP,iBAAAlB,EAAA,+EAEXC,MAAM,GAAD,OAAIC,8BAAJ,sBAAkDgB,EAAMC,KAAO,CACpFP,OAAQ,SACRC,KAAMC,KAAKC,UAAUG,GACrBF,QAAS,CACP,eAAgB,oBAElBb,YAAa,YARc,UAEvBC,EAFuB,OAahB,OAFPiB,EAAOjB,EAAIkB,QAXY,yCAcpB,CAAEd,QAAS,YAdS,UAiBhB,MAATa,EAjByB,yCAkBpB,CAAEb,QAAS,YAlBS,gCAqBtB,CAAEA,QAAS,KArBW,yCAuB7BF,QAAQC,MAAM,KAAMC,SAvBS,kBAwBtB,CAAEA,QAAS,KAAMA,QAASC,MAAO,KAAMA,QAxBjB,0DAAH,sDA4BjBc,EAAc,uCAAG,4BAAAvB,EAAA,+EAERC,MAAM,GAAD,OAAIC,8BAAJ,iBAAqD,CAC1EC,YAAa,YAHW,cAEpBC,EAFoB,yBAKnBA,EAAIC,QALe,uCAO1BC,QAAQC,MAAM,KAAMC,SAPM,kBAQnB,CAAEA,QAAS,KAAMA,QAASC,MAAO,KAAMA,QARpB,yDAAH,sD,SDnEfX,O,+BAAAA,I,+BAAAA,I,yBAAAA,I,+BAAAA,I,+BAAAA,I,mCAAAA,I,iDAAAA,I,qCAAAA,I,iCAAAA,I,0CAAAA,M,KAaL,IAAM0B,EAAc,WACzB,8CAAO,WAAOC,GAAP,iBAAAzB,EAAA,sEACaD,IADb,OAGe,aAFdK,EADD,QAGGI,SACEkB,EAAStB,EAATsB,KAERD,EAAS,CAAEE,KAAM7B,EAAY8B,aAAcC,QAASH,EAAMI,YAAY,IACtEL,EAAS,CAAEE,KAAM7B,EAAYiC,gBAAiBC,WAAW,KAChC,qBAAhB5B,EAAII,QACbiB,EAAS,CACPE,KAAM7B,EAAYmC,cAClBC,MAAO,CACLC,MAAO,2BACPC,YAAa,uFACbC,OAAQ,qBACRC,OAAQ,WACNb,EAAS,CAAEE,KAAM7B,EAAYmC,cAAeC,MAAO,WAKzD5B,QAAQC,MAAMH,EAAII,SArBf,2CAAP,uDA0BW+B,EAAW,SAACC,GACvB,8CAAO,WAAOf,GAAP,iBAAAzB,EAAA,6DACLyB,EAAS,CAAEE,KAAM7B,EAAYiC,gBAAiBC,WAAW,IADpD,SAEatB,EAAe8B,GAF5B,OAIe,aAFdpC,EAFD,QAIGI,SACEkB,EAAStB,EAATsB,KACRD,EAAS,CAAEE,KAAM7B,EAAY2C,UAAWvB,MAAOQ,MAE/CpB,QAAQC,MAAMH,EAAII,SACE,YAAhBJ,EAAII,SACNiB,EAAS,CACPE,KAAM7B,EAAYmC,cAClBC,MAAO,CACLC,MAAO,2BACPC,YAAa,oIACbC,OAAQ,6CAKhBZ,EAAS,CAAEE,KAAM7B,EAAYiC,gBAAiBC,WAAW,IACzDP,EAAS,CAAEE,KAAM7B,EAAY4C,sBAAuBC,YAAa,KArB5D,2CAAP,uDAyBWC,EAAc,SAACJ,GAC1B,8CAAO,WAAOf,GAAP,iBAAAzB,EAAA,6DACLyB,EAAS,CAAEE,KAAM7B,EAAYiC,gBAAiBC,WAAW,IADpD,SAEaf,EAAkBuB,GAF/B,OAIe,aAFdpC,EAFD,QAIGI,SACEkB,EAAStB,EAATsB,KACRD,EAAS,CAAEE,KAAM7B,EAAY+C,aAAc3B,MAAOQ,MAElDpB,QAAQC,MAAMH,EAAII,SACE,YAAhBJ,EAAII,SACNiB,EAAS,CACPE,KAAM7B,EAAYmC,cAClBC,MAAO,CACLC,MAAO,2BACPC,YAAa,oIACbC,OAAQ,6CAKhBZ,EAAS,CAAEE,KAAM7B,EAAYiC,gBAAiBC,WAAW,IACzDP,EAAS,CAAEE,KAAM7B,EAAYgD,eAAgBC,eAAgB,KArBxD,2CAAP,uDAyBWC,EAAc,SAACR,GAC1B,8CAAO,WAAOf,GAAP,eAAAzB,EAAA,6DACLyB,EAAS,CAAEE,KAAM7B,EAAYiC,gBAAiBC,WAAW,IADpD,SAEaZ,EAAkBoB,GAF/B,OAIe,aAFdpC,EAFD,QAIGI,QACNiB,EAAS,CAAEE,KAAM7B,EAAYmD,aAAc/B,MAAOsB,KAElDlC,QAAQC,MAAMH,EAAII,SACE,YAAhBJ,EAAII,SACNiB,EAAS,CACPE,KAAM7B,EAAYmC,cAClBC,MAAO,CACLC,MAAO,2BACPC,YAAa,oIACbC,OAAQ,6CAKhBZ,EAAS,CAAEE,KAAM7B,EAAYiC,gBAAiBC,WAAW,IACzDP,EAAS,CAAEE,KAAM7B,EAAYgD,eAAgBC,eAAgB,KApBxD,2CAAP,uDAwBWG,EAAe,SAACH,GAC3B,MAAO,CACLpB,KAAM7B,EAAYgD,eAClBC,mBAMSI,EAAsB,SAACR,GAClC,MAAO,CACLhB,KAAM7B,EAAY4C,sBAClBC,YAAaA,GAAe,KAMnBS,EAAgB,SAACpB,GAC5B,MAAO,CACLL,KAAM7B,EAAYiC,gBAClBC,cAISqB,EAAc,SACzBnB,GAOA,MAAO,CACLP,KAAM7B,EAAYmC,cAClBC,UAISoB,EAAiB,SAACC,GAM7B,MAAO,CACL5B,KAAM7B,EAAY0D,kBAClBD,aErIWE,EAnCE,WACf,IAAMvB,EAAQwB,aAAY,SAACC,GACzB,OAAOA,EAAMC,IAAI1B,SAGbT,EAAWoC,cAEXC,EAAgBC,uBACpB,YAAgB,IAAbC,EAAY,EAAZA,MACDvC,EAAS4B,EAAY,OACrBW,MAEF,CAACvC,IAEGwC,EAAeF,uBAAY,YAAe,EAAZC,MAClCE,OAAOC,SAASC,KAAhB,6DAA6ElE,uBAA7E,yBAAmIA,8BAAnI,qBACC,IAEH,OAAOmE,mBAAQ,WACb,OACE,kBAAC,QAAD,CAAOC,OAAQpC,GACb,kBAAC,QAAMqC,MAAP,qBACA,kBAAC,QAAMC,SAAP,YAAiBtC,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAOC,OACxB,kBAAC,QAAMsC,QAAP,KACE,kCAAIvC,QAAJ,IAAIA,OAAJ,EAAIA,EAAOE,cAEb,kBAAC,QAAMsC,OAAP,CAAcC,QAASb,EAAec,SAAO,GAA7C,gBAGA,kBAAC,QAAMF,OAAP,CAAcC,SAAc,OAALzC,QAAK,IAALA,OAAA,EAAAA,EAAOI,SAAU2B,GAAxC,OAAuD/B,QAAvD,IAAuDA,OAAvD,EAAuDA,EAAOG,WAGjE,CAACH,EAAO+B,EAAcH,KCjBZe,EAhBU,WACvB,IAAM7C,EAAY0B,aAAY,SAACC,GAC7B,OAAOA,EAAMC,IAAI5B,aAGnB,OACE,oCACGA,GACC,kBAAC,OAAD,KACE,kBAAC,UAAD,CAAS8C,KAAK,QAAQnD,KAAK,e,2CCwGtBoD,EA7GD,WAAO,IAAD,EACcC,oBAAS,GADvB,mBACXC,EADW,KACDC,EADC,KAGZC,EAAMC,iBAAO,MACnBC,uBAAaF,GAAK,WAChBD,GAAaD,MAGf,IAAM1B,EAAWG,aACf,SACEC,GAOA,OAAOA,EAAMC,IAAIL,YAIf9B,EAAWoC,cAEXyB,EAAsBvB,uBAAY,WACtCtC,EAAS2B,GAAc,MACtB,CAAC3B,IAEE8D,EAAuBxB,uBAAY,WACvCtC,EAAS2B,GAAc,MACtB,CAAC3B,IAEI+D,EAA4BjC,EAA5BiC,MAAOC,EAAqBlC,EAArBkC,WAAYC,EAASnC,EAATmC,KAErBC,EAAetB,mBAAQ,WAC3B,OACE,yBAAKc,IAAKA,GACR,kBAAC,OAAD,KACE,kBAAC,OAAD,CAAMS,IAAKH,EAAYC,KAAMA,GAC3B,kBAAC,OAAD,CACEtB,KAAI,UAAKlE,8BAAL,kBACJyE,QAASY,GAFX,2BAKE,0BAAMM,MAAO,CAAEC,WAAY,SACzB,kBAAC,SAAD,CAAQhB,KAAM,YAOzB,CAACW,EAAYF,EAAsBG,IAEhCK,EAAe1B,mBAAQ,WAC3B,OACE,yBAAKc,IAAKA,GACR,kBAAC,OAAD,CACEf,KAAI,6DAAwDlE,uBAAxD,yBAA8GA,8BAA9G,mBACJyE,QAASW,GAET,kBAAC,OAAD,KACE,kBAAC,OAAD,CAAMM,IAAKI,IAASN,KAAK,4BAAzB,2BAEE,yBACEE,IAAKK,IACLC,IAAI,SACJL,MAAO,CAAEM,MAAO,OAAQL,WAAY,gBAO/C,CAACR,IAEEc,EAAiB/B,mBAAQ,WAC7B,OACE,kBAAC,SAAD,CACEwB,MAAO,CAAEQ,YAAa,OAAQC,aAAc,QAC5CC,MAAI,EACJ5B,QAAS,WACPO,GAAY,KAGd,yBAAKU,IAAKH,EAAYS,IAAI,OAAOL,MAAO,CAAEM,MAAO,OAAQK,WAAY,YAGxE,CAACf,IAEEgB,EAAiBpC,mBAAQ,WAC7B,OACE,kBAAC,SAAD,CACEwB,MAAO,CAAEQ,YAAa,OAAQC,aAAc,QAC5CC,MAAI,EACJG,UAAW,kBAAC,OAAD,MACX/B,QAAS,WACPO,GAAY,QAIjB,IAEH,OAAMM,EACGP,EAAWU,EAAeS,EAE1BnB,EAAWc,EAAeU,G,iDCvGtBE,EARA,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,IACVC,EAAY9C,uBAAY,SAAC+C,GAC7B,MAAO,+DAAaC,MAAM,EAAID,EAAM,GAAKA,KACxC,IAEH,OAAO,8BAAOD,EAAUD,KC6WXnC,EA1UuC,SAAC,GAIhD,IAHLuC,EAGI,EAHJA,UAGI,IAFJC,aAEI,aADJC,iBACI,SACI/C,EAA4D6C,EAA5D7C,SAAUhC,EAAkD6E,EAAlD7E,MAAOhB,EAA2C6F,EAA3C7F,IAAKiB,EAAsC4E,EAAtC5E,YAAa+E,EAAyBH,EAAzBG,MAAOC,EAAkBJ,EAAlBI,OAAQC,EAAUL,EAAVK,MADtD,cAE0BlD,EAASxB,YAFnC,GAEG2E,EAFH,KAEcC,EAFd,OAG0CF,EAAtC5B,EAHJ,EAGIA,WAAY+B,EAHhB,EAGgBA,SAAU9B,EAH1B,EAG0BA,KAAMF,EAHhC,EAGgCA,MAC5BiC,EAASC,yBAATD,KACFhG,EAAWoC,cALb,EAO0BmB,mBAASkC,GAPnC,mBAOGS,EAPH,KAOYC,EAPZ,OAQuB5C,mBAASiC,GARhC,mBAQGY,EARH,KAQaC,EARb,KAUEC,EAAoBhE,uBACxB,SAACzB,GACCb,EAASyB,EAAaZ,MAExB,CAACb,IAGGO,EAAY0B,aAAY,SAACC,GAC7B,OAAOA,EAAMC,IAAI5B,aAGbuB,EAAWG,aAAY,SAACC,GAC5B,OAAOA,EAAMC,IAAIL,YAtBf,EAyBiByE,sBAAZC,GAzBL,oBA2BEC,GAAW7D,mBAAQ,WACvB,OACE,kBAAC,OAAD,CAAM8B,MAAM,QAAQgC,QAAQ,GAC1B,yBAAKtC,MAAO,CAAEuC,UAAW,UACvB,kBAAC,SAAD,CACEtD,KAAK,OACLnD,KAAK,QACL4E,MAAI,EACJ5B,QAAS,SAAC0D,GACRN,EAAkB,eAAG5G,GAAO,MALhC,MAWF,kBAAC,OAAKsD,QAAN,KACE,kBAAC,OAAD,CAAM6D,IAAE,EAACzC,MAAO,CAAEuC,UAAW,WAC1BjG,GAGH,kBAAC,OAAD,CAAMiC,KAAMoD,GACV,kBAAC,UAAD,CAASe,KAAM7C,GACb,kBAAC,SAAD,CAAQE,IAAKH,EAAYX,KAAK,YAIlC,kBAAC,OAAD,CAAM0D,IAAE,EAAC7G,KAAK,UAAUkE,MAAO,CAAEuC,UAAW,WAC1C,kBAAC,EAAD,CAAQxB,IAAKQ,GAAU,KAGzB,kBAAC,QAAD,CAAOxB,IAAKuB,GAAS,GAAIhB,MAAO,IAAKsC,OAAQ,OAE/C,kBAAC,OAAKhE,QAAN,KACE,kBAAC,OAAD,CAAMiE,OAAK,GAAEtG,IAEf,kBAAC,OAAKuG,OAAN,KACE,kBAAC,OAAD,CAAM7D,KAAM,GAAI8D,MAAI,EAACjH,KAAK,WAA1B,UAAwC2F,IACxC,qCACA,kBAAC,OAAD,CAAMxC,KAAM,GAAI8D,MAAI,EAACjH,KAAK,WAA1B,UAAwC4F,IACxC,kBAAC,OAAD,CACEqB,MAAI,EACJjE,QAAS,WACP8C,EAAK,GAAD,OAAIH,EAAJ,aAAkBC,IACtBU,GAAS,CAAEM,KAAM,0BAGnB,kBAAC,OAAD,CAAMzD,KAAM,OAGhB,kBAAC,OAAK6D,OAAN,KACE,kBAAC,SAAD,CACEE,QAAS7G,EACTL,KAAK,QACL4E,MAAI,EACJV,MAAO,CAAEM,MAAO,OAChBxB,QAAS,WACPlD,EACE4B,EAAY,CACVlB,MAAO,uCACPC,YAAa,iIACbC,OAAQ,2BACRC,OAAO,WAAD,4BAAE,sBAAAtC,EAAA,sEACAyB,EAASuB,EAAYgE,IADrB,uBAEAvF,EAAS4B,EAAY,OAFrB,OAGN4E,GAAS,CAAEM,KAAM,yCAHX,2CAAF,kDAAC,OAQbO,SAAUvF,EAASiC,QAAUA,GAnB/B,gBAuBA,kBAAC,SAAD,CACE7D,KAAK,UACL4E,MAAI,EACJV,MAAO,CAAEM,MAAO,OAChBxB,QAAS,WACPiD,GAAW,IAEbkB,SAAUvF,EAASiC,QAAUA,GAP/B,oBAcL,CACDrE,EACAsE,EACAgC,EACArF,EACAX,EACAsG,EACAP,EACAL,EACAnF,EACAuF,EACA/B,EACA8B,EACA5B,EACA0B,EACAa,GACAjB,EACA7E,EACAoB,EAASiC,QApIP,GAuIuCuD,YAAQ,CAAEC,KAAM,aAAnDC,GAvIJ,GAuIIA,aAAcC,GAvIlB,GAuIkBA,SAAUC,GAvI5B,GAuI4BA,OAC1BC,GAAmB1F,aAAY,SAACC,GACpC,OAAOA,EAAM0F,MAAMD,oBAGfE,GAAmBvF,uBAAY,WACnCtC,EAASyB,EAAa,KACtBzB,EAAS0B,EAAoB,OAC5B,CAAC1B,IAEJ8H,qBAAU,WACR9H,EAASD,OACR,CAACC,IAEJ,IAAM+H,GAAWnF,mBAAQ,WAAO,IAAD,QAC7B,OACE,0BACEoF,SAAUR,GAAY,uCAAC,WAAOS,GAAP,qBAAA1J,EAAA,yDAEbmH,GADFwC,EAAYD,GACVvC,MAAOC,EAAWuC,EAAXvC,OAEXlG,EAJiB,eAKhByI,GAGAxC,IACHjG,EAAK,eAAQA,EAAR,CAAeiG,MAAO,MAGxBC,IACHlG,EAAK,eAAQA,EAAR,CAAekG,OAAQ,KAG9BlG,EAAK,eAAQA,EAAR,CAAeiD,WAAUkD,WAE1BQ,IAAYF,EAlBK,wBAmBnBzG,EAAK,eAAQA,EAAR,CAAeiD,SAAU,CAAExC,KAAM,QAASgB,YAAayG,MAnBzC,UAqBb3H,EAASc,EAASrB,IArBL,QAsBnB4G,GAAO,GAEPG,GAAS,CAAEM,KAAM,yCAxBE,WA2BhBV,IAAYF,EA3BI,wBA4BnBzG,EAAK,eAAQA,EAAR,CAAeC,QA5BD,UA8BbM,EAASmB,EAAY1B,IA9BR,QA+BnB+G,GAAS,CAAEM,KAAM,yCA/BE,4CAAD,wDAmCtB,kBAAC,OAAD,CAAMpC,MAAM,SACV,yBAAKN,MAAO,CAAEuC,UAAW,UACvB,kBAAC,SAAD,CAAQtD,KAAK,OAAOnD,KAAK,QAAQ4E,MAAI,EAAC5B,QAAS2E,IAA/C,MAIF,kBAAC,OAAK7E,QAAN,KACE,yBAAKoB,MAAO,CAAEuC,UAAW,WACvB,kBAAC,OAAD,CAAME,IAAE,GAAErB,EAAQ,2BAAS,6BAE7B,kBAAC,QAAD,CACEd,MAAM,OACNyD,WAAS,EACTC,YAAY,eACZnE,KAAK,QACLP,IAAK+D,GAAS,CACZY,SAAU,uCACVC,QAAS,CACPL,MAAO,iYACPlJ,QAAS,kFAEXwJ,SAAU,SAACC,GACT,GAAIA,EAAIC,OAAS,GACf,MAAM,wDAIZC,aAAchI,IAEhB,kBAAC,OAAD,CAAMR,KAAK,QAAQ+G,OAAK,GAAxB,UACGS,GAAOhH,aADV,aACG,EAAc3B,SAEjB,kBAAC,SAAD,CAAQ4J,EAAG,IACX,kBAAC,QAAD,CACEjE,MAAM,OACNyD,WAAS,EACTC,YAAY,eACZnE,KAAK,SACLP,IAAK+D,GAAS,CACZa,QAAS,CACPL,MAAO,UACPlJ,QAAS,wBAGb2J,aAAY,UAAKlD,EAAQ,GAAKG,KAEhC,kBAAC,OAAD,CAAMzF,KAAK,QAAQ+G,OAAK,GAAxB,UACGS,GAAO/B,cADV,aACG,EAAe5G,SAElB,kBAAC,SAAD,CAAQ4J,EAAG,IACX,kBAAC,QAAD,CACEjE,MAAM,OACNyD,WAAS,EACTC,YAAY,2BACZnE,KAAK,QACLP,IAAK+D,GAAS,CACZa,QAAS,CACPL,MAAO,qGACPlJ,QAAS,qDAGb2J,aAAchD,IAEhB,kBAAC,OAAD,CAAMxF,KAAK,QAAQ+G,OAAK,GAAxB,UACGS,GAAOhC,aADV,aACG,EAAc3G,SAEjB,kBAAC,SAAD,CAAQ4J,EAAG,IACX,kBAAC,WAAD,CACEjE,MAAM,OACNkE,KAAM,EACNR,YAAY,eACZnE,KAAK,cACLP,IAAK+D,GAAS,CACZc,SAAU,SAACC,GACT,GAAIA,EAAIC,OAAS,IACf,MAAO,yDAIbC,aAAc/H,IAEhB,kBAAC,OAAD,CAAMT,KAAK,QAAQ+G,OAAK,GAAxB,UACGS,GAAO/G,mBADV,aACG,EAAoB5B,UAGzB,kBAAC,OAAKmI,OAAN,KACE,kBAAC,SAAD,CAAQ2B,SAAS,QAAQ/D,MAAI,EAAC5E,KAAK,UAAUkE,MAAO,CAAEM,MAAO,QAA7D,gBAGA,kBAAC,SAAD,CACE0C,QAAS7G,EACTsI,SAAS,SACT/D,MAAI,EACJ5E,KAAK,UACLkE,MAAO,CAAEM,MAAO,QAEfc,EAAQ,eAAO,iBAGpB,kBAAC,OAAK0B,OAAN,KACE,kBAAC,OAAD,CAAMC,MAAI,EAACF,OAAK,EAAC/G,KAAK,WACnBsF,EAAK,UAAMmC,GAAiB,IAAO9B,GAEtC,kBAAC,OAAD,CAAMsB,MAAI,EAACF,OAAK,EAAC/G,KAAK,WACnBsF,EAAK,UAAMmC,GAAiB,IAAO7B,QAM7C,CACDpG,EACAiI,GACAhH,EACAX,EACAkG,EACAwB,GAAO/G,YACP+G,GAAOhC,MACPgC,GAAO/B,OACP+B,GAAOhH,MACPmH,GACAL,GACA9B,EACAnF,EACAiF,EACAM,EACAM,EACA1D,EACAmD,EACAD,EACAD,EACA8B,GACAjB,GACA9F,IAGF,OAAOwF,EAAU6B,GAAWtB,ICtRfqC,EA3EqC,SAAC,GAO9C,IANLvD,EAMI,EANJA,UAMI,IALJrF,YAKI,MALG,SAKH,MAJJsF,aAII,aAHJC,iBAGI,aAFJsD,YAEI,MAFG,GAEH,EADDC,EACC,+DACItG,EAAkB6C,EAAlB7C,SAAUhD,EAAQ6F,EAAR7F,IADd,cAE0BgD,EAASxB,YAFnC,GAEG2E,EAFH,KAEcC,EAFd,KAIE9F,EAAWoC,cAEX6G,EAA0BhH,aAAY,SAACC,GAC3C,OAAOA,EAAM0F,MAAMqB,cAGf3C,EAAoBhE,uBACxB,SAAC4G,GACC,OAAO,WACLlJ,EAASyB,EAAayH,OAG1B,CAAClJ,IAGH,OAAO4C,mBAAQ,WACb,IAAMuG,EAAiB,WAATjJ,EAAoB,UAAY,UACxCmD,EAAc,EAAP0F,EAEb,OACE,oCACE,kBAAC,IAAD,eACElD,UAAWA,EACXC,SAAUA,EACVsD,YAAaL,EACbM,UAAmB,GAAPN,GACRC,GAEJ,yBAAK5E,MAAO,CAAEkF,OAAQ,WAAapG,QAASoD,EAAkB,eAAG5G,GAAO,KACtE,kBAAC,SAAD,CAAQyJ,MAAOA,EAAO9F,KAAMA,OAI9B4F,EAAWvJ,IAAS8F,IACpB,kBAAC,IAAD,eACEK,UAAWA,EACXC,SAAUA,EACVyD,aAAa,EACbC,OAAO,MACPC,eAAe,EACfC,QAAS,GACTC,aAAa,GACTX,GAEJ,kBAAC,EAAD,CAASzD,UAAWA,EAAWC,MAAOA,EAAOC,UAAWA,QAK/D,CACD/F,EACAsJ,EACA1C,EACAb,EACAD,EACAM,EACAD,EACAoD,EACA1D,EACArF,EACA6I,K,SClEWa,EAfD,SAAC,GAAgC,IAA9Bb,EAA6B,EAA7BA,KACTc,EAA+B5H,aAAY,SAACC,GAChD,OAAOA,EAAM0F,MAAMxH,WAGrB,OACE,oCACGyJ,EAAeC,KAAI,SAACrK,GACnB,IAAMsK,EAAMC,YAAKvK,EAAMC,KAAO,GAAI,wCAClC,OAAO,kBAAC,EAAD,CAAM6F,UAAW9F,EAAOsJ,KAAMA,EAAOgB,IAAKA,S,QCyH1CE,cAAgB,CAAE9H,IA/Bd,WAOb,IANJD,EAMG,uDANgB,CACjB3B,WAAW,EACXE,MAAO,KACPqB,SAAU,CAAEiC,MAAO,GAAIC,WAAY,GAAIC,KAAM,GAAI8B,SAAU,KAE7DlF,EACG,uCACH,OAAQA,EAAOX,MACb,KAAK7B,EAAYiC,gBACf,MAAO,CAAEC,UAAWM,EAAON,UAAWE,MAAOyB,EAAMzB,MAAOqB,SAAUI,EAAMJ,UAE5E,KAAKzD,EAAYmC,cACf,MAAO,CACLD,UAAW2B,EAAM3B,UACjBE,MAAOI,EAAOJ,MACdqB,SAAUI,EAAMJ,UAGpB,KAAKzD,EAAY0D,kBACf,MAAO,CACLxB,UAAW2B,EAAM3B,UACjBE,MAAOI,EAAOJ,MACdqB,SAAS,eAAMjB,EAAOiB,WAG1B,QACE,OAAOI,IAIyB0F,MA9HjB,WAYf,IAXJ1F,EAWG,uDAXoB,CACrB9B,QAAS,GACT6I,WAAY,GACZtB,iBAAkB,IAEpB9G,EAMG,uCACH,OAAQA,EAAOX,MACb,KAAK7B,EAAY8B,aACf,MAAO,CACLC,QAASS,EAAOT,QAAP,YAAqBS,EAAOT,SAAW,GAChD6I,WAAY/G,EAAM+G,WAClBtB,iBAAkBzF,EAAMyF,kBAG5B,KAAKtJ,EAAYgD,eACf,MAAO,CACLjB,QAAS8B,EAAM9B,QACf6I,WAAW,eAAMpI,EAAOS,gBACxBqG,iBAAkBzF,EAAMyF,kBAG5B,KAAKtJ,EAAY2C,UACf,MAAO,CACLZ,QAAQ,GAAD,mBAAM8B,EAAM9B,SAAZ,CAAqBS,EAAOpB,QACnCwJ,WAAY/G,EAAM+G,WAClBtB,iBAAkBzF,EAAMyF,kBAG5B,KAAKtJ,EAAY+C,aACf,IAAM8I,EAAMhI,EAAM9B,QAAQ0J,KAAI,SAACK,GAC7B,OAAIA,EAAEzK,MAAQmB,EAAOpB,MAAMC,IAClBmB,EAAOpB,MAET0K,KAET,MAAO,CACL/J,QAAQ,YAAK8J,GACbjB,WAAY/G,EAAM+G,WAClBtB,iBAAkBzF,EAAMyF,kBAI5B,KAAKtJ,EAAYmD,aACf,IAAM0I,EAAMhI,EAAM9B,QAAQ0J,KAAI,SAACK,GAC7B,OAAIA,EAAEzK,MAAQmB,EAAOpB,MAAMC,IAClBmB,EAAOpB,MAET0K,KAGT,MAAO,CACL/J,QAAQ,YAAK8J,GACbjB,WAAY/G,EAAM+G,WAClBtB,iBAAkBzF,EAAMyF,kBAI5B,KAAKtJ,EAAY4C,sBACf,MAAO,CACLb,QAAS8B,EAAM9B,QACf6I,WAAY/G,EAAM+G,WAClBtB,iBAAiB,YAAK9G,EAAOK,cAGjC,QACE,OAAOgB,MC5CPkI,EAAM,WAAO,IAAD,EACgB7G,mBAAiC,CAC/DuC,SAAU,mBACVD,UAAW,mBACXkD,KAAM,GACNsB,QAAS,GACTC,QAAS,IANK,mBACTC,EADS,KACCC,EADD,KASV1I,EAAWG,aAAY,SAACC,GAC5B,OAAOA,EAAMC,IAAIL,YAEXiC,EAAUjC,EAAViC,MAEAgF,EAASwB,EAATxB,KAEF/I,EAAWoC,cAEXqI,EAAqB9G,iBAAO,MAE5B+G,EAAoBpI,uBAAY,WACpCtC,EAASD,OACR,CAACC,IAEE2K,EAAiBrI,uBAAY,WACjC,sBAAC,4BAAA/D,EAAA,sEACoBuB,IADpB,OACO8K,EADP,OAEC5K,EAAS6B,EAAe+I,IAFzB,0CAAD,KAIC,CAAC5K,IAEJ8H,qBAAU,WACR4C,IACAC,MACC,CAACD,EAAmBC,IAEvB7C,qBAAU,WACR,IAAM+C,EAAaC,SAASC,eAAe,eAC3CD,SAAS1L,KAAK4L,YAAYH,KACzB,IAEH,IAAMlD,EAAiC1F,aAAY,SAACC,GAClD,OAAOA,EAAM0F,MAAMD,oBAGfsD,EAA2B,CAC/B/K,KAAM,QACNgB,YAAayG,GAGTuD,EAAiB5I,uBACrB,SAAC6H,GAEGnK,EADI+D,EACKrC,EAAoByI,EAAEgB,QAG7BvJ,EAAY,CACVlB,MAAO,2BACPC,YAAY,4RAIZC,OAAQ,8CAKhB,CAACZ,EAAU+D,IAGPqH,EAAqB9I,uBACzB,SAAC6H,GACCnK,EAAS0B,EAAoByI,EAAEgB,WAEjC,CAACnL,IAGGqL,EAAuB/I,uBAAY,SAACsI,GAAsC,IACtEU,EAAcV,EAAdU,UACRd,EAAYc,KACX,IAEH,OACE,oCACE,kBAAC,IAAD,eACE5H,IAAK+G,GACDF,EAFN,CAGE7F,MAAM,QACNsC,OAAO,QACPuE,kBAAmBF,EACnBG,SAAU/M,uDACVgN,qBAAsBhN,gGACtBiN,iBAAiB,EACjBC,WAAYT,EACZU,oBAAoB,IAEpB,kBAAC,EAAD,MAEA,kBAAC,EAAD,MAEA,kBAAC,OAAKC,UAAN,CAAgBC,QAAQ,iBACtB,kBAAC,OAAD,KACE,6BACE,kBAAC,IAAD,CAAmBC,aAAa,IAChC,kBAAC,SAAD,CAAQpD,EAAG,IACX,kBAAC,OAAD,CAAMhG,KAAK,0CACT,kBAAC,UAAD,CAASmE,KAAK,2BAAOkF,UAAU,SAC7B,kBAAC,SAAD,CAAQ3I,KAAK,QAAQc,IAAK8H,QAG9B,kBAAC,SAAD,CAAQtD,EAAG,IACX,kBAAC,OAAD,CAAMhG,KAAK,iCACT,kBAAC,UAAD,CAASmE,KAAK,2BAAOkF,UAAU,SAC7B,kBAAC,SAAD,CAAQ7H,IAAK+H,IAAa7I,KAAK,cAKvC,kBAAC,OAAD,KACE,kBAAC,EAAD,QAIJ,kBAAC,EAAD,CAAO0F,KAAMA,IAEgB,IAA5BpB,EAAiBc,QAChB,oCACE,kBAAC,EAAD,CACElD,UAAW,CACT7E,MAAO,GACPgC,SAAUuI,EACVvL,IAAK,GACLiB,YAAa,GACb+E,MAAO,GACPC,OAAQ,EACRC,MAAO9D,GAET5B,KAAK,MACLiM,WAAW,EACXC,OAAQhB,EACRrC,KAAMA,EACNvD,OAAK,EACLC,WAAS,QAqBR4G,EAZI,WACjB,IAAMC,EAAQC,YAAYC,EAAUC,YAAgBC,MACpD,OACE,kBAAC,IAAD,CAAUJ,MAAOA,GACf,kBAAC,gBAAD,KACE,kBAAC,cAAD,MACA,kBAAC,EAAD,S,OC9LRK,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEF/B,SAASC,eAAe,U,iBCT1B5M,EAAOC,QAAU,ulL","file":"static/js/main.8eb33088.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/user.f12b54df.svg\";","module.exports = \"data:image/png;base64,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\"","import { Dispatch } from 'redux';\nimport {\n  addMapSignToDB,\n  deleteMapSignToDB,\n  listMapSignsFromDB,\n  updateMapSignToDB,\n} from '../../api';\nimport { ICoordinates, IOpenedTips, ISignEntry } from '../../types';\n\nexport enum ACTION_TYPE {\n  INIT_ENTRIES,\n  TICK_ENTRIES,\n  ADD_ENTRY,\n  DELETE_ENTRY,\n  UPDATE_ENTRY,\n  SET_OPENED_TIP,\n  UPDATE_ADDED_LOCATION,\n  SET_APP_LOADING,\n  SET_APP_ALERT,\n  SET_APP_USER_INFO,\n}\n\nexport const initEntries = () => {\n  return async (dispatch: Dispatch) => {\n    const res = await listMapSignsFromDB();\n\n    if (res.message === 'success') {\n      const { data } = res;\n\n      dispatch({ type: ACTION_TYPE.INIT_ENTRIES, entries: data, initFinish: true });\n      dispatch({ type: ACTION_TYPE.SET_APP_LOADING, isLoading: false });\n    } else if (res.message === 'too many request') {\n      dispatch({\n        type: ACTION_TYPE.SET_APP_ALERT,\n        alert: {\n          title: '刷新过快',\n          description: '页面刷新太频繁了！请稍后重试',\n          active: '知道了',\n          action: () => {\n            dispatch({ type: ACTION_TYPE.SET_APP_ALERT, alert: null });\n          },\n        },\n      });\n    } else {\n      console.error(res.message);\n    }\n  };\n};\n\nexport const addEntry = (sign: ISignEntry) => {\n  return async (dispatch: Dispatch) => {\n    dispatch({ type: ACTION_TYPE.SET_APP_LOADING, isLoading: true });\n    const res = await addMapSignToDB(sign);\n\n    if (res.message === 'success') {\n      const { data } = res;\n      dispatch({ type: ACTION_TYPE.ADD_ENTRY, entry: data });\n    } else {\n      console.error(res.message);\n      if (res.message === 'Denied!') {\n        dispatch({\n          type: ACTION_TYPE.SET_APP_ALERT,\n          alert: {\n            title: '需要登录',\n            description: '需要通过 Github 授权进行登录，请先登录再进行操作!',\n            active: '去 Github 进行授权',\n          },\n        });\n      }\n    }\n    dispatch({ type: ACTION_TYPE.SET_APP_LOADING, isLoading: false });\n    dispatch({ type: ACTION_TYPE.UPDATE_ADDED_LOCATION, coordinates: [] });\n  };\n};\n\nexport const updateEntry = (sign: ISignEntry) => {\n  return async (dispatch: Dispatch) => {\n    dispatch({ type: ACTION_TYPE.SET_APP_LOADING, isLoading: true });\n    const res = await updateMapSignToDB(sign);\n\n    if (res.message === 'success') {\n      const { data } = res;\n      dispatch({ type: ACTION_TYPE.UPDATE_ENTRY, entry: data });\n    } else {\n      console.error(res.message);\n      if (res.message === 'Denied!') {\n        dispatch({\n          type: ACTION_TYPE.SET_APP_ALERT,\n          alert: {\n            title: '需要登录',\n            description: '需要通过 Github 授权进行登录，请先登录再进行操作!',\n            active: '去 Github 进行授权',\n          },\n        });\n      }\n    }\n    dispatch({ type: ACTION_TYPE.SET_APP_LOADING, isLoading: false });\n    dispatch({ type: ACTION_TYPE.SET_OPENED_TIP, openedTipState: {} });\n  };\n};\n\nexport const deleteEntry = (sign: ISignEntry) => {\n  return async (dispatch: Dispatch) => {\n    dispatch({ type: ACTION_TYPE.SET_APP_LOADING, isLoading: true });\n    const res = await deleteMapSignToDB(sign);\n\n    if (res.message === 'success') {\n      dispatch({ type: ACTION_TYPE.DELETE_ENTRY, entry: sign });\n    } else {\n      console.error(res.message);\n      if (res.message === 'Denied!') {\n        dispatch({\n          type: ACTION_TYPE.SET_APP_ALERT,\n          alert: {\n            title: '需要登录',\n            description: '需要通过 Github 授权进行登录，请先登录再进行操作!',\n            active: '去 Github 进行授权',\n          },\n        });\n      }\n    }\n    dispatch({ type: ACTION_TYPE.SET_APP_LOADING, isLoading: false });\n    dispatch({ type: ACTION_TYPE.SET_OPENED_TIP, openedTipState: {} });\n  };\n};\n\nexport const setOpenedTip = (openedTipState: IOpenedTips) => {\n  return {\n    type: ACTION_TYPE.SET_OPENED_TIP,\n    openedTipState,\n  };\n};\n\n//\n\nexport const updateAddedLocation = (coordinates: ICoordinates | []) => {\n  return {\n    type: ACTION_TYPE.UPDATE_ADDED_LOCATION,\n    coordinates: coordinates || [],\n  };\n};\n\n//\n\nexport const setAppLoading = (isLoading: boolean) => {\n  return {\n    type: ACTION_TYPE.SET_APP_LOADING,\n    isLoading,\n  };\n};\n\nexport const setAppAlert = (\n  alert: {\n    title?: string;\n    description?: string;\n    active?: string;\n    action?: () => void;\n  } | null\n) => {\n  return {\n    type: ACTION_TYPE.SET_APP_ALERT,\n    alert,\n  };\n};\n\nexport const setAppUserInfo = (userInfo: {\n  login: string;\n  avatar_url: string;\n  name: string;\n  html_url: string;\n}) => {\n  return {\n    type: ACTION_TYPE.SET_APP_USER_INFO,\n    userInfo,\n  };\n};\n","import { ISignEntry } from '../types';\n\nexport const listMapSignsFromDB = async () => {\n  try {\n    const res = await fetch(`${process.env.REACT_APP_SERVER_URL}/api/signs`, {\n      credentials: 'include',\n    });\n    return res.json();\n  } catch (error) {\n    console.error(error.message);\n    return { message: error.message, stack: error.stack };\n  }\n};\n\nexport const addMapSignToDB = async (param: ISignEntry) => {\n  try {\n    const res = await fetch(`${process.env.REACT_APP_SERVER_URL}/api/signs`, {\n      method: 'POST',\n      body: JSON.stringify(param),\n      headers: {\n        'content-type': 'application/json',\n      },\n      credentials: 'include',\n    });\n    return res.json();\n  } catch (error) {\n    console.error(error.message);\n    return { message: error.message, stack: error.stack };\n  }\n};\n\nexport const updateMapSignToDB = async (entry: ISignEntry) => {\n  try {\n    const res = await fetch(`${process.env.REACT_APP_SERVER_URL}/api/signs/${entry._id}`, {\n      method: 'PUT',\n      body: JSON.stringify(entry),\n      headers: {\n        'content-type': 'application/json',\n      },\n      credentials: 'include',\n    });\n    return res.json();\n  } catch (error) {\n    console.error(error.message);\n    return { message: error.message, stack: error.stack };\n  }\n};\n\nexport const deleteMapSignToDB = async (entry: ISignEntry) => {\n  try {\n    const res = await fetch(`${process.env.REACT_APP_SERVER_URL}/api/signs/${entry._id}`, {\n      method: 'DELETE',\n      body: JSON.stringify(entry),\n      headers: {\n        'content-type': 'application/json',\n      },\n      credentials: 'include',\n    });\n\n    const code = res.status;\n\n    if (code === 204) {\n      return { message: 'success' };\n    }\n\n    if (code === 500) {\n      return { message: 'Denied!' };\n    }\n\n    return { message: '' };\n  } catch (error) {\n    console.error(error.message);\n    return { message: error.message, stack: error.stack };\n  }\n};\n\nexport const getCurrentUser = async () => {\n  try {\n    const res = await fetch(`${process.env.REACT_APP_SERVER_URL}/oauth/signin`, {\n      credentials: 'include',\n    });\n    return res.json();\n  } catch (error) {\n    console.error(error.message);\n    return { message: error.message, stack: error.stack };\n  }\n};\n","import { Modal } from '@geist-ui/react';\nimport React, { useCallback, useMemo } from 'react';\nimport { RootStateOrAny, useDispatch, useSelector } from 'react-redux';\nimport { setAppAlert } from './store/actions';\n\nconst AppAlert = () => {\n  const alert = useSelector((state: RootStateOrAny) => {\n    return state.app.alert;\n  });\n\n  const dispatch = useDispatch();\n\n  const handlePassive = useCallback(\n    ({ close }) => {\n      dispatch(setAppAlert(null));\n      close();\n    },\n    [dispatch]\n  );\n  const handleActive = useCallback(({ close }) => {\n    window.location.href = `https://github.com/login/oauth/authorize?client_id=${process.env.REACT_APP_OAUTH_CLIENT_ID}&redirect_uri=${process.env.REACT_APP_SERVER_URL}/oauth/redirect`;\n  }, []);\n\n  return useMemo(() => {\n    return (\n      <Modal open={!!alert}>\n        <Modal.Title>注意</Modal.Title>\n        <Modal.Subtitle>{alert?.title}</Modal.Subtitle>\n        <Modal.Content>\n          <p>{alert?.description}</p>\n        </Modal.Content>\n        <Modal.Action onClick={handlePassive} passive>\n          取消\n        </Modal.Action>\n        <Modal.Action onClick={alert?.action || handleActive}>{alert?.active}</Modal.Action>\n      </Modal>\n    );\n  }, [alert, handleActive, handlePassive]);\n};\n\nexport default AppAlert;\n","import { Loading, Page } from '@geist-ui/react';\nimport React, { FC } from 'react';\nimport { RootStateOrAny, useSelector } from 'react-redux';\n\nconst LoadingLabel: FC = () => {\n  const isLoading = useSelector((state: RootStateOrAny) => {\n    return state.app.isLoading;\n  });\n\n  return (\n    <>\n      {isLoading && (\n        <Page>\n          <Loading size=\"large\" type=\"warning\" />\n        </Page>\n      )}\n    </>\n  );\n};\n\nexport default LoadingLabel;\n","import { Button, Card, Link, useClickAway, User } from '@geist-ui/react';\nimport { LogOut, User as UserIcon } from '@geist-ui/react-icons';\nimport React, { useCallback, useMemo, useRef, useState } from 'react';\nimport { RootStateOrAny, useDispatch, useSelector } from 'react-redux';\nimport githubPng from './res/github.png';\nimport userSVG from './res/user.svg';\nimport { setAppLoading } from './store/actions';\n\nconst Login = () => {\n  const [showCard, setShowCard] = useState(false);\n\n  const ref = useRef(null as any);\n  useClickAway(ref, () => {\n    setShowCard(!showCard);\n  });\n\n  const userInfo = useSelector(\n    (\n      state: RootStateOrAny & {\n        login: string;\n        avatar_url: string;\n        name: string;\n        html_url: string;\n      }\n    ) => {\n      return state.app.userInfo;\n    }\n  );\n\n  const dispatch = useDispatch();\n\n  const handleSignInLoading = useCallback(() => {\n    dispatch(setAppLoading(true));\n  }, [dispatch]);\n\n  const handleSignOutLoading = useCallback(() => {\n    dispatch(setAppLoading(true));\n  }, [dispatch]);\n\n  const { login, avatar_url, name } = userInfo;\n\n  const hasLoginCard = useMemo(() => {\n    return (\n      <div ref={ref}>\n        <Card>\n          <User src={avatar_url} name={name}>\n            <Link\n              href={`${process.env.REACT_APP_SERVER_URL}/oauth/signout`}\n              onClick={handleSignOutLoading}\n            >\n              退出登录\n              <span style={{ marginLeft: '10px' }}>\n                <LogOut size={12} />\n              </span>\n            </Link>\n          </User>\n        </Card>\n      </div>\n    );\n  }, [avatar_url, handleSignOutLoading, name]);\n\n  const notLoginCard = useMemo(() => {\n    return (\n      <div ref={ref}>\n        <Link\n          href={`https://github.com/login/oauth/authorize?client_id=${process.env.REACT_APP_OAUTH_CLIENT_ID}&redirect_uri=${process.env.REACT_APP_SERVER_URL}/oauth/redirect`}\n          onClick={handleSignInLoading}\n        >\n          <Card>\n            <User src={userSVG} name=\"请先登录\">\n              进行验证\n              <img\n                src={githubPng}\n                alt=\"github\"\n                style={{ width: '12px', marginLeft: '10px' }}\n              />\n            </User>\n          </Card>\n        </Link>\n      </div>\n    );\n  }, [handleSignInLoading]);\n\n  const hasLoginButton = useMemo(() => {\n    return (\n      <Button\n        style={{ paddingLeft: '15px', paddingRight: '15px' }}\n        auto\n        onClick={() => {\n          setShowCard(true);\n        }}\n      >\n        <img src={avatar_url} alt=\"user\" style={{ width: '24px', paddingTop: '8px' }} />\n      </Button>\n    );\n  }, [avatar_url]);\n\n  const notLoginButton = useMemo(() => {\n    return (\n      <Button\n        style={{ paddingLeft: '15px', paddingRight: '15px' }}\n        auto\n        iconRight={<UserIcon />}\n        onClick={() => {\n          setShowCard(true);\n        }}\n      />\n    );\n  }, []);\n\n  if (!!login) {\n    return showCard ? hasLoginCard : hasLoginButton;\n  } else {\n    return showCard ? notLoginCard : notLoginButton;\n  }\n};\n\nexport default Login;\n","import React, { useCallback } from 'react';\n\nconst Rating = ({ num }: { num: number }) => {\n  const getRating = useCallback((para) => {\n    return '★★★★★☆☆☆☆☆'.slice(5 - para, 10 - para);\n  }, []);\n\n  return <span>{getRating(num)}</span>;\n};\n\nexport default Rating;\n","import {\n  Avatar,\n  Button,\n  Card,\n  Image,\n  Input,\n  Link,\n  Spacer,\n  Text,\n  Textarea,\n  Tooltip,\n  useClipboard,\n  useToasts,\n} from '@geist-ui/react';\nimport { Copy } from '@geist-ui/react-icons';\nimport React, {\n  FC,\n  PropsWithChildren,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport { useForm } from 'react-hook-form';\nimport { RootStateOrAny, useDispatch, useSelector } from 'react-redux';\nimport { IOwner, ISignEntry } from '../types';\nimport Rating from './Rating';\nimport {\n  addEntry,\n  deleteEntry,\n  initEntries,\n  setAppAlert,\n  setOpenedTip,\n  updateAddedLocation,\n  updateEntry,\n} from './store/actions';\n\ninterface IContentProps {\n  signEntry: ISignEntry;\n  isNew?: boolean;\n  isEditing?: boolean;\n}\nconst Content: FC<PropsWithChildren<IContentProps>> = ({\n  signEntry,\n  isNew = false,\n  isEditing = false,\n}) => {\n  const { location, title, _id, description, image, rating, owner } = signEntry;\n  const [longitude, latitude] = location.coordinates;\n  const { avatar_url, html_url, name, login } = owner as IOwner;\n  const { copy } = useClipboard();\n  const dispatch = useDispatch();\n\n  const [editing, setEditing] = useState(isEditing);\n  const [localNew, setNew] = useState(isNew);\n\n  const handleSetOpendTip = useCallback(\n    (action) => {\n      dispatch(setOpenedTip(action));\n    },\n    [dispatch]\n  );\n\n  const isLoading = useSelector((state: RootStateOrAny) => {\n    return state.app.isLoading;\n  });\n\n  const userInfo = useSelector((state: RootStateOrAny) => {\n    return state.app.userInfo;\n  });\n\n  const [, setToast] = useToasts();\n\n  const signShow = useMemo(() => {\n    return (\n      <Card width=\"300px\" shadow={false}>\n        <div style={{ textAlign: 'right' }}>\n          <Button\n            size=\"mini\"\n            type=\"error\"\n            auto\n            onClick={(params) => {\n              handleSetOpendTip({ [_id!]: false });\n            }}\n          >\n            X\n          </Button>\n        </div>\n        <Card.Content>\n          <Text h4 style={{ textAlign: 'center' }}>\n            {title}\n          </Text>\n\n          <Link href={html_url}>\n            <Tooltip text={name}>\n              <Avatar src={avatar_url} size=\"small\" />\n            </Tooltip>\n          </Link>\n\n          <Text h5 type=\"warning\" style={{ textAlign: 'center' }}>\n            <Rating num={rating || 0} />\n          </Text>\n\n          <Image src={image || ''} width={256} height={192} />\n        </Card.Content>\n        <Card.Content>\n          <Text small>{description}</Text>\n        </Card.Content>\n        <Card.Footer>\n          <Text size={11} span type=\"success\">{`${longitude}`}</Text>\n          <span> - </span>\n          <Text size={11} span type=\"warning\">{`${latitude}`}</Text>\n          <Text\n            span\n            onClick={() => {\n              copy(`${longitude}, ${latitude}`);\n              setToast({ text: '已拷贝!' });\n            }}\n          >\n            <Copy size={16} />\n          </Text>\n        </Card.Footer>\n        <Card.Footer>\n          <Button\n            loading={isLoading}\n            type=\"error\"\n            auto\n            style={{ width: '50%' }}\n            onClick={() => {\n              dispatch(\n                setAppAlert({\n                  title: '正在删除标记',\n                  description: '您正在删除标记，此操作不可逆！确认删除吗？',\n                  active: '确认删除',\n                  action: async () => {\n                    await dispatch(deleteEntry(signEntry));\n                    await dispatch(setAppAlert(null));\n                    setToast({ text: '已删除标记！' });\n                  },\n                })\n              );\n            }}\n            disabled={userInfo.login !== login}\n          >\n            删除\n          </Button>\n          <Button\n            type=\"warning\"\n            auto\n            style={{ width: '50%' }}\n            onClick={() => {\n              setEditing(true);\n            }}\n            disabled={userInfo.login !== login}\n          >\n            编辑\n          </Button>\n        </Card.Footer>\n      </Card>\n    );\n  }, [\n    _id,\n    avatar_url,\n    copy,\n    description,\n    dispatch,\n    handleSetOpendTip,\n    html_url,\n    image,\n    isLoading,\n    latitude,\n    login,\n    longitude,\n    name,\n    rating,\n    setToast,\n    signEntry,\n    title,\n    userInfo.login,\n  ]);\n\n  const { handleSubmit, register, errors } = useForm({ mode: 'onChange' });\n  const addedCoordinates = useSelector((state: RootStateOrAny) => {\n    return state.signs.addedCoordinates;\n  });\n\n  const handleClickClose = useCallback(() => {\n    dispatch(setOpenedTip({}));\n    dispatch(updateAddedLocation([]));\n  }, [dispatch]);\n\n  useEffect(() => {\n    dispatch(initEntries());\n  }, [dispatch]);\n\n  const signForm = useMemo(() => {\n    return (\n      <form\n        onSubmit={handleSubmit(async (value) => {\n          const formValue = value as ISignEntry;\n          const { image, rating } = formValue;\n\n          let entry: ISignEntry = {\n            ...formValue,\n          };\n\n          if (!image) {\n            entry = { ...entry, image: '' };\n          }\n\n          if (!rating) {\n            entry = { ...entry, rating: 1 };\n          }\n\n          entry = { ...entry, location, owner };\n\n          if (localNew && editing) {\n            entry = { ...entry, location: { type: 'Point', coordinates: addedCoordinates } };\n\n            await dispatch(addEntry(entry));\n            setNew(false);\n\n            setToast({ text: '已新建标记！' });\n          }\n\n          if (!localNew && editing) {\n            entry = { ...entry, _id };\n\n            await dispatch(updateEntry(entry));\n            setToast({ text: '已修改标记！' });\n          }\n        })}\n      >\n        <Card width=\"300px\">\n          <div style={{ textAlign: 'right' }}>\n            <Button size=\"mini\" type=\"error\" auto onClick={handleClickClose}>\n              X\n            </Button>\n          </div>\n          <Card.Content>\n            <div style={{ textAlign: 'center' }}>\n              <Text h4>{isNew ? '新建标记' : '编辑标记'}</Text>\n            </div>\n            <Input\n              width=\"100%\"\n              clearable\n              placeholder=\"标题\"\n              name=\"title\"\n              ref={register({\n                required: '标题不能为空',\n                pattern: {\n                  value: /(\\p{Unified_Ideograph}|[a-zA-Z0-9_ ])/u,\n                  message: '仅接收字符数字空格和下划线',\n                },\n                validate: (str) => {\n                  if (str.length > 48) {\n                    return `标题最大接受48字符`;\n                  }\n                },\n              })}\n              initialValue={title}\n            />\n            <Text type=\"error\" small>\n              {errors.title?.message}\n            </Text>\n            <Spacer y={1} />\n            <Input\n              width=\"100%\"\n              clearable\n              placeholder=\"级别\"\n              name=\"rating\"\n              ref={register({\n                pattern: {\n                  value: /^[1-5]$/,\n                  message: '数字 1 - 5',\n                },\n              })}\n              initialValue={`${isNew ? '' : rating}`}\n            />\n            <Text type=\"error\" small>\n              {errors.rating?.message}\n            </Text>\n            <Spacer y={1} />\n            <Input\n              width=\"100%\"\n              clearable\n              placeholder=\"图片地址\"\n              name=\"image\"\n              ref={register({\n                pattern: {\n                  value: /https:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,\n                  message: '仅接受 https 协议的 URL',\n                },\n              })}\n              initialValue={image}\n            />\n            <Text type=\"error\" small>\n              {errors.image?.message}\n            </Text>\n            <Spacer y={1} />\n            <Textarea\n              width=\"100%\"\n              rows={6}\n              placeholder=\"描述\"\n              name=\"description\"\n              ref={register({\n                validate: (str) => {\n                  if (str.length > 512) {\n                    return '描述最大接受512字符';\n                  }\n                },\n              })}\n              initialValue={description}\n            />\n            <Text type=\"error\" small>\n              {errors.description?.message}\n            </Text>\n          </Card.Content>\n          <Card.Footer>\n            <Button htmlType=\"reset\" auto type=\"warning\" style={{ width: '50%' }}>\n              重置\n            </Button>\n            <Button\n              loading={isLoading}\n              htmlType=\"submit\"\n              auto\n              type=\"success\"\n              style={{ width: '50%' }}\n            >\n              {isNew ? '新建' : '更新'}\n            </Button>\n          </Card.Footer>\n          <Card.Footer>\n            <Text span small type=\"success\">\n              {isNew ? `${addedCoordinates[0]}` : longitude}\n            </Text>\n            <Text span small type=\"warning\">\n              {isNew ? `${addedCoordinates[1]}` : latitude}\n            </Text>\n          </Card.Footer>\n        </Card>\n      </form>\n    );\n  }, [\n    _id,\n    addedCoordinates,\n    description,\n    dispatch,\n    editing,\n    errors.description,\n    errors.image,\n    errors.rating,\n    errors.title,\n    handleClickClose,\n    handleSubmit,\n    image,\n    isLoading,\n    isNew,\n    latitude,\n    localNew,\n    location,\n    longitude,\n    owner,\n    rating,\n    register,\n    setToast,\n    title,\n  ]);\n\n  return editing ? signForm : signShow;\n};\n\nexport default Content;\n","import { MapPin } from '@geist-ui/react-icons';\nimport React, { FC, useCallback, useMemo } from 'react';\nimport { Marker, MarkerProps, Popup } from 'react-map-gl';\nimport { RootStateOrAny, useDispatch, useSelector } from 'react-redux';\nimport { IOpenedTips, ISignEntry } from '../types';\nimport Content from './Content';\nimport { setOpenedTip } from './store/actions';\n\ninterface ISignProps {\n  signEntry: ISignEntry;\n  type?: 'yellow' | 'red';\n  isNew?: boolean;\n  isEditing?: boolean;\n  zoom: number;\n}\n\nconst Sign: FC<Partial<MarkerProps> & ISignProps> = ({\n  signEntry,\n  type = 'yellow',\n  isNew = false,\n  isEditing = false,\n  zoom = 12,\n  ...args\n}) => {\n  const { location, _id } = signEntry;\n  const [longitude, latitude] = location.coordinates;\n\n  const dispatch = useDispatch();\n\n  const openedTips: IOpenedTips = useSelector((state: RootStateOrAny) => {\n    return state.signs.openedTips;\n  });\n\n  const handleSetOpendTip = useCallback(\n    (entryOpenedState) => {\n      return () => {\n        dispatch(setOpenedTip(entryOpenedState));\n      };\n    },\n    [dispatch]\n  );\n\n  return useMemo(() => {\n    const color = type === 'yellow' ? '#e6891e' : '#ff2200';\n    const size = zoom * 2;\n\n    return (\n      <>\n        <Marker\n          longitude={longitude}\n          latitude={latitude}\n          offsetLeft={-zoom}\n          offsetTop={-zoom * 2}\n          {...args}\n        >\n          <div style={{ cursor: 'pointer' }} onClick={handleSetOpendTip({ [_id!]: true })}>\n            <MapPin color={color} size={size} />\n          </div>\n        </Marker>\n\n        {(openedTips[_id!] || isNew) && (\n          <Popup\n            longitude={longitude}\n            latitude={latitude}\n            closeButton={false}\n            anchor=\"top\"\n            captureScroll={true}\n            tipSize={15}\n            sortByDepth={true}\n            {...args}\n          >\n            <Content signEntry={signEntry} isNew={isNew} isEditing={isEditing} />\n          </Popup>\n        )}\n      </>\n    );\n  }, [\n    _id,\n    args,\n    handleSetOpendTip,\n    isEditing,\n    isNew,\n    latitude,\n    longitude,\n    openedTips,\n    signEntry,\n    type,\n    zoom,\n  ]);\n};\n\nexport default Sign;\n","import React from 'react';\nimport { RootStateOrAny, useSelector } from 'react-redux';\nimport { v5 as uuid } from 'uuid';\nimport { ISignEntry } from '../types';\nimport Sign from './Sign';\n\nconst Signs = ({ zoom }: { zoom: number }) => {\n  const visibleEntries: ISignEntry[] = useSelector((state: RootStateOrAny) => {\n    return state.signs.entries;\n  });\n\n  return (\n    <>\n      {visibleEntries.map((entry) => {\n        const key = uuid(entry._id || '', '63d601b1-3193-475e-9d1e-ccb1fd077784');\n        return <Sign signEntry={entry} zoom={zoom!} key={key} />;\n      })}\n    </>\n  );\n};\n\nexport default Signs;\n","import { Action, combineReducers } from 'redux';\nimport { ICoordinates, IOpenedTips, ISignEntry } from '../../types';\nimport { ACTION_TYPE } from './actions';\n\ninterface IEntriesState {\n  entries: ISignEntry[];\n  openedTips: { [id: string]: string };\n  addedCoordinates: ICoordinates | [];\n}\n\nexport const signs = (\n  state: IEntriesState = {\n    entries: [],\n    openedTips: {},\n    addedCoordinates: [],\n  },\n  action: Action & {\n    entry: ISignEntry;\n    entries: ISignEntry[];\n    openedTipState: IOpenedTips;\n    coordinates: ICoordinates;\n  }\n) => {\n  switch (action.type) {\n    case ACTION_TYPE.INIT_ENTRIES:\n      return {\n        entries: action.entries ? [...action.entries] : [],\n        openedTips: state.openedTips,\n        addedCoordinates: state.addedCoordinates,\n      };\n\n    case ACTION_TYPE.SET_OPENED_TIP:\n      return {\n        entries: state.entries,\n        openedTips: { ...action.openedTipState },\n        addedCoordinates: state.addedCoordinates,\n      };\n\n    case ACTION_TYPE.ADD_ENTRY:\n      return {\n        entries: [...state.entries, action.entry],\n        openedTips: state.openedTips,\n        addedCoordinates: state.addedCoordinates,\n      };\n\n    case ACTION_TYPE.UPDATE_ENTRY: {\n      const odd = state.entries.map((e) => {\n        if (e._id === action.entry._id) {\n          return action.entry;\n        }\n        return e;\n      });\n      return {\n        entries: [...odd],\n        openedTips: state.openedTips,\n        addedCoordinates: state.addedCoordinates,\n      };\n    }\n\n    case ACTION_TYPE.DELETE_ENTRY: {\n      const odd = state.entries.map((e) => {\n        if (e._id === action.entry._id) {\n          return action.entry;\n        }\n        return e;\n      });\n\n      return {\n        entries: [...odd],\n        openedTips: state.openedTips,\n        addedCoordinates: state.addedCoordinates,\n      };\n    }\n\n    case ACTION_TYPE.UPDATE_ADDED_LOCATION:\n      return {\n        entries: state.entries,\n        openedTips: state.openedTips,\n        addedCoordinates: [...action.coordinates],\n      };\n\n    default:\n      return state;\n  }\n};\n\ninterface IUserInfo {\n  login: string;\n  avatar_url: string;\n  name: string;\n  html_url: string;\n}\n\ninterface IAlertType {\n  title: string;\n  description: string;\n  active?: string;\n  action?: () => void;\n}\ninterface IAppState {\n  isLoading: boolean;\n  alert: IAlertType | null;\n  userInfo: IUserInfo;\n}\n\nexport const app = (\n  state: IAppState = {\n    isLoading: true,\n    alert: null,\n    userInfo: { login: '', avatar_url: '', name: '', html_url: '' },\n  },\n  action: Action & { isLoading: boolean; alert: IAlertType; userInfo: IUserInfo }\n) => {\n  switch (action.type) {\n    case ACTION_TYPE.SET_APP_LOADING:\n      return { isLoading: action.isLoading, alert: state.alert, userInfo: state.userInfo };\n\n    case ACTION_TYPE.SET_APP_ALERT:\n      return {\n        isLoading: state.isLoading,\n        alert: action.alert,\n        userInfo: state.userInfo,\n      };\n\n    case ACTION_TYPE.SET_APP_USER_INFO:\n      return {\n        isLoading: state.isLoading,\n        alert: action.alert,\n        userInfo: { ...action.userInfo },\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default combineReducers({ app, signs });\n","import {\n  Avatar,\n  CssBaseline,\n  GeistProvider,\n  Grid,\n  Link,\n  Spacer,\n  Tooltip,\n} from '@geist-ui/react';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport ReactMapGL, {\n  ContextViewStateChangeInfo,\n  DragEvent,\n  NavigationControl,\n  PointerEvent,\n  ViewportProps,\n} from 'react-map-gl';\nimport { Provider, RootStateOrAny, useDispatch, useSelector } from 'react-redux';\nimport { applyMiddleware, createStore } from 'redux';\nimport thunk from 'redux-thunk';\nimport { getCurrentUser } from '../api';\nimport { ICoordinates, ILocation, IOwner } from '../types';\nimport AppAlert from './AppAlert';\nimport LoadingLabel from './LoadingLabel';\nimport Login from './Login';\nimport avatarImage from './res/avatar.png';\nimport githubSVG from './res/github.png';\nimport Sign from './Sign';\nimport Signs from './Signs';\nimport {\n  initEntries,\n  setAppAlert,\n  setAppUserInfo,\n  updateAddedLocation,\n} from './store/actions';\nimport reducers from './store/reducers';\n\nconst Map = () => {\n  const [viewport, setViewport] = useState<Partial<ViewportProps>>({\n    latitude: 22.828373068332063,\n    longitude: 108.30307218045874,\n    zoom: 12,\n    maxZoom: 15,\n    minZoom: 2,\n  });\n\n  const userInfo = useSelector((state: RootStateOrAny & { login: string }) => {\n    return state.app.userInfo;\n  });\n  const { login } = userInfo as IOwner;\n\n  const { zoom } = viewport;\n\n  const dispatch = useDispatch();\n\n  const currentMapInstance = useRef(null as any);\n\n  const handleInitEntries = useCallback(() => {\n    dispatch(initEntries());\n  }, [dispatch]);\n\n  const handleUserInfo = useCallback(() => {\n    (async () => {\n      const info = await getCurrentUser();\n      dispatch(setAppUserInfo(info));\n    })();\n  }, [dispatch]);\n\n  useEffect(() => {\n    handleInitEntries();\n    handleUserInfo();\n  }, [handleInitEntries, handleUserInfo]);\n\n  useEffect(() => {\n    const preLoading = document.getElementById('pre-loading');\n    document.body.removeChild(preLoading!);\n  }, []);\n\n  const addedCoordinates: ICoordinates = useSelector((state: RootStateOrAny) => {\n    return state.signs.addedCoordinates;\n  });\n\n  const addedLocation: ILocation = {\n    type: 'Point',\n    coordinates: addedCoordinates,\n  };\n\n  const handleAddEntry = useCallback(\n    (e: PointerEvent) => {\n      if (!!login) {\n        dispatch(updateAddedLocation(e.lngLat));\n      } else {\n        dispatch(\n          setAppAlert({\n            title: '需要登录',\n            description: `\n          为保证安全性，需要使用 Github\n          账户对此应用进行授权，应用不保存您的敏感信息，请放心使用。\n        `,\n            active: '去 Github 授权登录',\n          })\n        );\n      }\n    },\n    [dispatch, login]\n  );\n\n  const handleDragAddEntry = useCallback(\n    (e: DragEvent) => {\n      dispatch(updateAddedLocation(e.lngLat));\n    },\n    [dispatch]\n  );\n\n  const handleViewportChange = useCallback((info: ContextViewStateChangeInfo) => {\n    const { viewState } = info;\n    setViewport(viewState);\n  }, []);\n\n  return (\n    <>\n      <ReactMapGL\n        ref={currentMapInstance}\n        {...viewport}\n        width=\"100vw\"\n        height=\"100vh\"\n        onViewStateChange={handleViewportChange}\n        mapStyle={process.env.REACT_APP_MAP_STYLE}\n        mapboxApiAccessToken={process.env.REACT_APP_MAPBOX_TOKEN} // edit it at .env file in *client* root directory.\n        doubleClickZoom={false}\n        onDblClick={handleAddEntry}\n        attributionControl={false}\n      >\n        <LoadingLabel />\n\n        <AppAlert />\n\n        <Grid.Container justify=\"space-between\">\n          <Grid>\n            <div>\n              <NavigationControl showCompass={true} />\n              <Spacer y={2} />\n              <Link href=\"https://github.com/xinleibird/map-sign\">\n                <Tooltip text=\"欢迎推送\" placement=\"right\">\n                  <Avatar size=\"small\" src={githubSVG} />\n                </Tooltip>\n              </Link>\n              <Spacer y={1} />\n              <Link href=\"https://github.com/xinleibird\">\n                <Tooltip text=\"关于作者\" placement=\"right\">\n                  <Avatar src={avatarImage} size=\"small\" />\n                </Tooltip>\n              </Link>\n            </div>\n          </Grid>\n          <Grid>\n            <Login />\n          </Grid>\n        </Grid.Container>\n\n        <Signs zoom={zoom!} />\n\n        {addedCoordinates.length === 2 && (\n          <>\n            <Sign\n              signEntry={{\n                title: '',\n                location: addedLocation,\n                _id: '',\n                description: '',\n                image: '',\n                rating: 1,\n                owner: userInfo,\n              }}\n              type=\"red\"\n              draggable={true}\n              onDrag={handleDragAddEntry}\n              zoom={zoom!}\n              isNew\n              isEditing\n            />\n          </>\n        )}\n      </ReactMapGL>\n    </>\n  );\n};\n\nconst MapWrapper = () => {\n  const store = createStore(reducers, applyMiddleware(thunk));\n  return (\n    <Provider store={store}>\n      <GeistProvider>\n        <CssBaseline />\n        <Map />\n      </GeistProvider>\n    </Provider>\n  );\n};\n\nexport default MapWrapper;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Map from './components/Map';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Map />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTE3OEEzMjk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyQTQxNEFCQzk5QTExMUUyOUExNUJDMTA0NkE4OTA0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTMwOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTMxOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+R7ClIwAADR5JREFUeNrsnQuw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\""],"sourceRoot":""}